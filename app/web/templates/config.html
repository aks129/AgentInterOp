<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration Control Panel - Multi-Agent Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='config.css') }}" rel="stylesheet">
</head>
<body class="bg-dark text-light">
    <nav class="navbar navbar-dark bg-secondary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i data-feather="settings"></i>
                Configuration Control Panel
            </a>
            <div class="navbar-nav flex-row">
                <a class="nav-link me-3" href="/">
                    <i data-feather="home"></i> Demo Interface
                </a>
                <span class="nav-link">
                    <span id="selftest-status" class="badge bg-secondary">Checking...</span>
                </span>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <div class="row">
            <!-- Scenario Configuration -->
            <div class="col-lg-4 mb-4">
                <div class="card bg-dark border-secondary">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i data-feather="layers"></i>
                            Scenario Configuration
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Active Scenario -->
                        <div class="mb-3">
                            <label for="scenario-select" class="form-label">Active Scenario</label>
                            <select class="form-select bg-dark text-light border-secondary" id="scenario-select">
                                <option value="bcse">BCS-E (Benefits Coverage Support Eligibility)</option>
                                <option value="clinical_trial">Clinical Trial Enrollment</option>
                                <option value="referral_specialist">Referral to Specialist</option>
                                <option value="prior_auth">Prior Authorization</option>
                                <option value="custom">Custom Scenario</option>
                            </select>
                        </div>

                        <!-- Scenario Details -->
                        <div class="mb-3">
                            <label class="form-label">Scenario Requirements</label>
                            <div class="requirements-section p-3 border rounded bg-secondary">
                                <div id="requirements-text" class="small text-muted">Loading requirements...</div>
                            </div>
                        </div>

                        <!-- Example Data -->
                        <div class="mb-3">
                            <label class="form-label">Example Data</label>
                            <button type="button" class="btn btn-outline-primary btn-sm" id="load-examples-btn">
                                <i data-feather="download"></i> Load Examples
                            </button>
                        </div>

                        <!-- Custom Payload -->
                        <div class="mb-3">
                            <label for="custom-payload" class="form-label">Custom Payload (JSON)</label>
                            <textarea class="form-control bg-dark text-light border-secondary" id="custom-payload" rows="8" placeholder="Enter custom JSON payload..."></textarea>
                            <div id="payload-error" class="text-danger mt-1" style="display: none;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Configuration -->
            <div class="col-lg-4 mb-4">
                <div class="card bg-dark border-secondary">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i data-feather="cpu"></i>
                            System Configuration
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Agent Mode -->
                        <div class="mb-4">
                            <label class="form-label">Agent Mode</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="mode" id="mode-full" value="full_stack" checked>
                                <label class="form-check-label" for="mode-full">
                                    Full Stack (Both Agents)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="mode" id="mode-applicant" value="applicant_only">
                                <label class="form-check-label" for="mode-applicant">
                                    Applicant Only
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="mode" id="mode-admin" value="administrator_only">
                                <label class="form-check-label" for="mode-admin">
                                    Administrator Only
                                </label>
                            </div>
                        </div>

                        <!-- Protocol Settings -->
                        <div class="mb-4">
                            <label class="form-label">Default Protocol</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="protocol-default" id="proto-a2a" value="a2a" checked>
                                <label class="form-check-label" for="proto-a2a">
                                    A2A (Agent-to-Agent JSON-RPC)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="protocol-default" id="proto-mcp" value="mcp">
                                <label class="form-check-label" for="proto-mcp">
                                    MCP (Model Context Protocol)
                                </label>
                            </div>
                        </div>

                        <!-- Data Sources -->
                        <div class="mb-4">
                            <label class="form-label">Data Sources</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="allow-fhir-mcp" checked>
                                <label class="form-check-label" for="allow-fhir-mcp">
                                    Allow FHIR MCP Access
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="allow-local-bundle" checked>
                                <label class="form-check-label" for="allow-local-bundle">
                                    Allow Local Bundle Access
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="allow-free-text" checked>
                                <label class="form-check-label" for="allow-free-text">
                                    Allow Free Text Context
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Simulation Settings -->
            <div class="col-lg-4 mb-4">
                <div class="card bg-dark border-secondary">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i data-feather="activity"></i>
                            Simulation Settings
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Processing Delays -->
                        <div class="mb-3">
                            <label for="admin-processing-ms" class="form-label">
                                Admin Processing Delay (ms)
                                <span class="text-muted">- Simulates real-world processing time</span>
                            </label>
                            <input type="number" class="form-control bg-dark text-light border-secondary" 
                                   id="admin-processing-ms" value="1200" min="0" max="10000" step="100">
                        </div>

                        <!-- Error Injection -->
                        <div class="mb-3">
                            <label for="error-injection-rate" class="form-label">
                                Error Injection Rate (0.0-1.0)
                                <span class="text-muted">- Probability of simulated errors</span>
                            </label>
                            <input type="number" class="form-control bg-dark text-light border-secondary" 
                                   id="error-injection-rate" value="0" min="0" max="1" step="0.05">
                        </div>

                        <!-- Capacity Limits -->
                        <div class="mb-3">
                            <label for="capacity-limit" class="form-label">
                                Capacity Limit
                                <span class="text-muted">- Max concurrent operations (empty = unlimited)</span>
                            </label>
                            <input type="number" class="form-control bg-dark text-light border-secondary" 
                                   id="capacity-limit" placeholder="Unlimited" min="1" max="100">
                        </div>

                        <!-- Load Testing -->
                        <div class="mb-3">
                            <label class="form-label">Load Testing</label>
                            <div class="d-grid gap-2">
                                <button type="button" class="btn btn-outline-warning btn-sm" id="stress-test-btn">
                                    <i data-feather="zap"></i> Run Stress Test
                                </button>
                                <button type="button" class="btn btn-outline-info btn-sm" id="benchmark-btn">
                                    <i data-feather="bar-chart-2"></i> Run Benchmark
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Management Actions -->
        <div class="row">
            <div class="col-12">
                <div class="card bg-dark border-secondary">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i data-feather="tool"></i>
                            Management Actions
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- Configuration Actions -->
                            <div class="col-md-3 mb-3">
                                <h6 class="text-muted">Configuration</h6>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-success" id="save-config-btn">
                                        <i data-feather="save"></i> Save Configuration
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary" id="export-config-btn">
                                        <i data-feather="download"></i> Export Config
                                    </button>
                                    <button type="button" class="btn btn-outline-warning" id="import-config-btn">
                                        <i data-feather="upload"></i> Import Config
                                    </button>
                                </div>
                            </div>

                            <!-- System Actions -->
                            <div class="col-md-3 mb-3">
                                <h6 class="text-muted">System</h6>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-outline-info" id="validate-config-btn">
                                        <i data-feather="check-circle"></i> Validate Config
                                    </button>
                                    <button type="button" class="btn btn-outline-primary" id="restart-services-btn">
                                        <i data-feather="refresh-cw"></i> Restart Services
                                    </button>
                                    <button type="button" class="btn btn-outline-danger" id="reset-all-btn">
                                        <i data-feather="trash-2"></i> Reset All
                                    </button>
                                </div>
                            </div>

                            <!-- Data Management -->
                            <div class="col-md-3 mb-3">
                                <h6 class="text-muted">Data Management</h6>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-outline-success" id="backup-data-btn">
                                        <i data-feather="database"></i> Backup Data
                                    </button>
                                    <button type="button" class="btn btn-outline-info" id="view-logs-btn">
                                        <i data-feather="file-text"></i> View Logs
                                    </button>
                                    <button type="button" class="btn btn-outline-warning" id="clear-cache-btn">
                                        <i data-feather="x-circle"></i> Clear Cache
                                    </button>
                                </div>
                            </div>

                            <!-- Monitoring -->
                            <div class="col-md-3 mb-3">
                                <h6 class="text-muted">Monitoring</h6>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-outline-primary" id="health-check-btn">
                                        <i data-feather="heart"></i> Health Check
                                    </button>
                                    <button type="button" class="btn btn-outline-info" id="performance-btn">
                                        <i data-feather="trending-up"></i> Performance
                                    </button>
                                    <button type="button" class="btn btn-outline-success" id="connectivity-btn">
                                        <i data-feather="wifi"></i> Connectivity
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status and Logs -->
        <div class="row mt-4">
            <div class="col-lg-6">
                <div class="card bg-dark border-secondary">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i data-feather="activity"></i>
                            System Status
                        </h6>
                    </div>
                    <div class="card-body">
                        <div id="system-status" class="status-display">
                            <div class="status-item">
                                <span class="status-label">Configuration:</span>
                                <span class="badge bg-success">Valid</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Agents:</span>
                                <span class="badge bg-success">Online</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Database:</span>
                                <span class="badge bg-success">Connected</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Services:</span>
                                <span class="badge bg-success">Running</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card bg-dark border-secondary">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i data-feather="message-square"></i>
                            Action Log
                        </h6>
                    </div>
                    <div class="card-body">
                        <div id="action-log" class="log-display">
                            <div class="log-entry">
                                <span class="timestamp">2025-09-03 22:39:48</span>
                                <span class="message">Configuration panel loaded</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file input for config import -->
    <input type="file" id="config-file-input" accept=".json" style="display: none;">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Feather Icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.js"></script>
    <!-- Configuration JS -->
    <script src="{{ url_for('static', filename='config.js') }}"></script>
</body>
</html>