<!-- Eligibility Card -->
<div class="card outcome-card d-none" id="eligibility-card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h6 class="mb-0">Eligibility Status</h6>
        <span class="eligibility-badge" id="eligibility-status-badge">Pending</span>
    </div>
    <div class="card-body">
        <div class="eligibility-result mb-3" id="eligibility-result">
            <div class="status-icon mb-2" id="eligibility-icon">‚ùì</div>
            <p class="status-text mb-2" id="eligibility-text">Checking eligibility...</p>
        </div>
        <div class="eligibility-details" id="eligibility-details">
            <h6 class="small fw-bold mb-2">Rationale:</h6>
            <ul class="list-unstyled small" id="eligibility-rationale"></ul>
        </div>
        <div class="eligibility-metadata small text-muted" id="eligibility-metadata"></div>
    </div>
</div>

<!-- Patient Snapshot Card -->
<div class="card outcome-card d-none" id="patient-card">
    <div class="card-header">
        <h6 class="mb-0">Patient Snapshot</h6>
    </div>
    <div class="card-body">
        <div class="patient-info">
            <div class="row mb-2">
                <div class="col-4"><strong>Sex:</strong></div>
                <div class="col-8" id="patient-sex">-</div>
            </div>
            <div class="row mb-2">
                <div class="col-4"><strong>Age:</strong></div>
                <div class="col-8" id="patient-age">-</div>
            </div>
            <div class="row mb-2">
                <div class="col-4"><strong>DOB:</strong></div>
                <div class="col-8" id="patient-dob">-</div>
            </div>
            <div class="row mb-2">
                <div class="col-4"><strong>Last Mammogram:</strong></div>
                <div class="col-8" id="patient-last-mammo">-</div>
            </div>
        </div>
    </div>
</div>

<!-- FHIR Ingest Panel -->
<div class="card mb-3" id="fhir-ingest-panel">
    <div class="card-header">
        <h6 class="mb-0">FHIR Data Ingestion</h6>
    </div>
    <div class="card-body">
        <div class="d-grid gap-2 mb-3">
            <button class="btn btn-primary" id="use-demo-patient-btn">
                üìã Use Canned Demo Patient
            </button>
            <div class="collapse" id="fhir-connect-panel">
                <div class="border rounded p-3">
                    <h6 class="small mb-2">Connect to Live FHIR Server</h6>
                    <div class="mb-2">
                        <input type="url" class="form-control form-control-sm" 
                               id="fhir-base-url" placeholder="FHIR Base URL (e.g., https://server.fire.ly)">
                    </div>
                    <div class="mb-2">
                        <input type="password" class="form-control form-control-sm" 
                               id="fhir-token" placeholder="Bearer Token (optional)">
                    </div>
                    <div class="d-grid gap-1">
                        <button class="btn btn-outline-secondary btn-sm" id="test-fhir-connection">
                            Test Connection
                        </button>
                        <button class="btn btn-success btn-sm" id="ingest-fhir-data" disabled>
                            Ingest Patient Data
                        </button>
                    </div>
                </div>
            </div>
            <button class="btn btn-outline-secondary btn-sm" type="button" 
                    data-bs-toggle="collapse" data-bs-target="#fhir-connect-panel">
                Connect to FHIR (optional) ‚Üï
            </button>
        </div>
        
        <div class="advanced-toggle">
            <button class="btn btn-outline-info btn-sm" type="button" 
                    data-bs-toggle="collapse" data-bs-target="#advanced-payload">
                Advanced ‚Üí Raw Payload
            </button>
            <div class="collapse mt-2" id="advanced-payload">
                <textarea class="form-control font-monospace small" rows="8" 
                          id="raw-payload" placeholder="Raw JSON payload will appear here..." readonly></textarea>
            </div>
        </div>
    </div>
</div>

<!-- Service Request Card -->
<div class="card outcome-card d-none" id="service-request-card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h6 class="mb-0">Service Request</h6>
        <span class="badge bg-info">Created</span>
    </div>
    <div class="card-body">
        <div class="request-details">
            <div class="row mb-2">
                <div class="col-4"><strong>Facility:</strong></div>
                <div class="col-8" id="request-facility">-</div>
            </div>
            <div class="row mb-2">
                <div class="col-4"><strong>Date Window:</strong></div>
                <div class="col-8" id="request-date-window">-</div>
            </div>
            <div class="row mb-2">
                <div class="col-4"><strong>Priority:</strong></div>
                <div class="col-8" id="request-priority">-</div>
            </div>
            <div class="row mb-2">
                <div class="col-4"><strong>Status:</strong></div>
                <div class="col-8" id="request-status">-</div>
            </div>
        </div>
    </div>
</div>

<!-- Scheduler Response Card -->
<div class="card outcome-card d-none" id="scheduler-response-card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h6 class="mb-0">Scheduler Response</h6>
        <span class="badge bg-success">Slot Proposed</span>
    </div>
    <div class="card-body">
        <div class="proposal-details">
            <div class="row mb-2">
                <div class="col-4"><strong>Proposed Date:</strong></div>
                <div class="col-8" id="proposed-date">-</div>
            </div>
            <div class="row mb-2">
                <div class="col-4"><strong>Time Slot:</strong></div>
                <div class="col-8" id="proposed-time">-</div>
            </div>
            <div class="row mb-2">
                <div class="col-4"><strong>Location:</strong></div>
                <div class="col-8" id="proposed-location">-</div>
            </div>
            <div class="mt-3">
                <button class="btn btn-success btn-sm me-2" id="accept-slot-btn">Accept</button>
                <button class="btn btn-outline-secondary btn-sm" id="request-alternative-btn">Request Alternative</button>
            </div>
        </div>
    </div>
</div>

<!-- Gap Closure Card -->
<div class="card outcome-card d-none" id="gap-closure-card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h6 class="mb-0">BCS Completion Status</h6>
        <span class="completion-badge" id="completion-status-badge">Pending</span>
    </div>
    <div class="card-body">
        <div class="completion-details" id="completion-details">
            <div class="status-icon mb-2" id="completion-icon">‚è≥</div>
            <p class="mb-2" id="completion-text">Waiting for procedure completion...</p>
            <div class="small text-muted" id="completion-metadata"></div>
        </div>
        <div class="mt-3">
            <button class="btn btn-primary btn-sm" id="simulate-completion-btn">
                üß™ Simulate BCS Completion
            </button>
            <a href="#" class="btn btn-outline-info btn-sm ms-2" id="trace-link" target="_blank" style="display: none;">
                View Trace
            </a>
        </div>
    </div>
</div>

<!-- Notification Feed Card -->
<div class="card" id="notification-feed-card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h6 class="mb-0">Notifications & Next Steps</h6>
        <button class="btn btn-outline-primary btn-sm" id="simulate-notification-btn">
            üì® Simulate Event
        </button>
    </div>
    <div class="card-body">
        <div class="notification-list" id="notification-list">
            <div class="text-center text-muted py-3">
                <div class="mb-2">üîî</div>
                <p class="mb-0">No notifications yet</p>
                <small>Events will appear here</small>
            </div>
        </div>
    </div>
</div>

<!-- Notification Item Template -->
<template id="notification-template">
    <div class="notification-item border rounded p-3 mb-2">
        <div class="d-flex align-items-start">
            <div class="notification-icon me-3"></div>
            <div class="flex-grow-1">
                <div class="d-flex justify-content-between align-items-start mb-1">
                    <h6 class="notification-title mb-0"></h6>
                    <small class="notification-timestamp text-muted"></small>
                </div>
                <p class="notification-message mb-1"></p>
                <div class="notification-metadata small text-muted"></div>
            </div>
        </div>
    </div>
</template>